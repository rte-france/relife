
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>About lifetime models &#8212; ReLife</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=733aff7d" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'contributor_guide/about_lifetime_models';</script>
    <script src="../_static/custom-icon.js?v=74687d30"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="About integrations" href="about_integration.html" />
    <link rel="prev" title="About numpy" href="about_numpy.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>
<aside class="bd-header-announcement" aria-label="Announcement">
  <div class="bd-header-announcement__content"><em>beta version</em> : the code is still in development (expected release by the end of April 2025). The documentation might not be up-to-date</div>
</aside>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class=" navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.png" class="logo__image only-light" alt="ReLife - Home"/>
    <img src="../_static/logo.png" class="logo__image only-dark pst-js-only" alt="ReLife - Home"/>
  
  
</a></div>
    
  </div>
  
  <div class=" navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../get_started/index.html">
    Get started
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../user_guide/index.html">
    User’s guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../api/index.html">
    API
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../learn/index.html">
    Learn
  </a>
</li>

            <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button"
                data-bs-toggle="dropdown" aria-expanded="false"
                aria-controls="pst-nav-more-links">
                    More
                </button>
                <ul id="pst-nav-more-links" class="dropdown-menu">
                    
<li class=" current active">
  <a class="nav-link dropdown-item nav-internal" href="index.html">
    Contributor’s guide
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../future/index.html">
    Future improvements
  </a>
</li>

                </ul>
            </li>
            
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/rte-france/relife/tree/refactoring" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://pypi.org/project/relife/" title="PyPI" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-custom fa-pypi fa-lg" aria-hidden="true"></i>
            <span class="sr-only">PyPI</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../get_started/index.html">
    Get started
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../user_guide/index.html">
    User’s guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../api/index.html">
    API
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../learn/index.html">
    Learn
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="index.html">
    Contributor’s guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../future/index.html">
    Future improvements
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/rte-france/relife/tree/refactoring" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://pypi.org/project/relife/" title="PyPI" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-custom fa-pypi fa-lg" aria-hidden="true"></i>
            <span class="sr-only">PyPI</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><p aria-level="2" class="caption" role="heading"><span class="caption-text">First time contribution</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="your_profile.html">What is your profile ?</a></li>
<li class="toctree-l1"><a class="reference internal" href="development_env.html">Developement environment</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Conception of ReLife2</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="about_numpy.html">About numpy</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">About lifetime models</a></li>
<li class="toctree-l1"><a class="reference internal" href="about_integration.html">About integrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="about_stochastic_process.html">Stochastic process sampling</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Python resources</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="additional_lectures.html">Lectures</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="index.html" class="nav-link">Contributor’s guide</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">About lifetime models</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="about-lifetime-models">
<h1>About lifetime models<a class="headerlink" href="#about-lifetime-models" title="Link to this heading">#</a></h1>
<p>When a model is composed of several parametric parts, which can
themselves be other <code class="docutils literal notranslate"><span class="pre">ParametricModel</span></code> objects, it can be challenging
to create a new model without disrupting the overall logic of the ReLife
implementations. To assist with the implementation of new statistical
models, we have implemented <em>framework</em> objects called <code class="docutils literal notranslate"><span class="pre">Parameters</span></code>
and <code class="docutils literal notranslate"><span class="pre">ParametricComponent</span></code>. These objects provide helpful properties
and operations to simplify the creation of new parametric models.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">Parameters</span></code> object is used to encode the parameters of a whole
model while preserving the composition structure of models. It can be
seen as a tree of parameter sets that follows the tree of model
composition. Additionally, it provides a set of helper properties and
operations that make it easier to define and work with the parameters of
a parametric model.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">ParametricComponent</span></code> object, on the other hand, is used to
represent a single parametric part of a model. It is composed of a
<code class="docutils literal notranslate"><span class="pre">Parameters</span></code> instance and provides a unified interface for adding new
components to existing ones, similar to function composition. It can be
seen as a tree of parametric functions.</p>
<p>By using these framework objects, it is possible to more easily create
new parametric models that are composed of multiple parts, without
having to worry about disrupting the overall logic of the ReLife
implementations.</p>
<section id="parameters">
<h2><code class="docutils literal notranslate"><span class="pre">Parameters</span></code><a class="headerlink" href="#parameters" title="Link to this heading">#</a></h2>
<p>In previous versions of ReLife, model parameters were encapsulated in a
varying-sized list of floats, depending on the number of parameters. The
<code class="docutils literal notranslate"><span class="pre">Parameters</span></code> object is a more powerful alternative to this simple
list, and it has been implemented to encapsulate the structure and
values of the parameters. This object is responsible for automatically
adapting the storage of parameters in a <code class="docutils literal notranslate"><span class="pre">ParametricComponent</span></code> and
ensuring that parameters follow the structure of model composition. We
have adapted the <a class="reference external" href="https://en.wikipedia.org/wiki/Composite_pattern">composite
pattern</a> to encode
parameters in a tree structure that follows the composition of the
model. Our <code class="docutils literal notranslate"><span class="pre">Parameters</span></code> objects can be seen as a tree of dictionaries.</p>
<p>Each node in the tree has:</p>
<ul class="simple">
<li><p>A dictionary of parameter names and values</p></li>
<li><p>All parameter names and values stored in lists (including those from
the current node and all leaf nodes)</p></li>
</ul>
<p>This allows for multiple nodes to have the same parameter names.
Separating the dictionary of current node parameters and lists of all
parameters is mainly due to computation constraints. When operations
modify all parameters of a model, it avoids the need to read the entire
parameter tree each time.</p>
<p>Each node can answer several requests, including:</p>
<ul class="simple">
<li><p>Getting/setting all parameter values from a node (updating the
current node’s parameter values and those of its leaves)</p></li>
<li><p>Getting/setting all parameter names from a node (updating the current
node’s parameter names and those of its leaves)</p></li>
<li><p>Getting/setting a parameter from its name at the node level (avoiding
the ability to call other node parameters by name to prevent naming
conflicts)</p></li>
<li><p>Modifying the entire set of parameter names and values, including
their number (updating the current node’s dictionary of parameters)</p></li>
</ul>
<p>I hope this revised text is clear and helpful. Let me know if you have
any further questions or concerns.</p>
<p><strong>improvements :</strong> - replace composite by
<a class="reference external" href="https://docs.python.org/fr/3/library/collections.html#collections.namedtuple">namedtuple</a>
and do not store all params and all names (not really used)</p>
</section>
<section id="parametriccomponent">
<h2><code class="docutils literal notranslate"><span class="pre">ParametricComponent</span></code><a class="headerlink" href="#parametriccomponent" title="Link to this heading">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">ParametricComponent</span></code> object also follows a tree-like structure,
as it stores other <code class="docutils literal notranslate"><span class="pre">ParametricComponent</span></code> objects in its <code class="docutils literal notranslate"><span class="pre">leaves</span></code>
attribute. It benefits from the <code class="docutils literal notranslate"><span class="pre">__getattr__</span></code> and <code class="docutils literal notranslate"><span class="pre">__setattr__</span></code>
Python magic methods, which create a sort of bridge with the parameters
data in order to call parameters by their names inside methods.</p>
<p>A <code class="docutils literal notranslate"><span class="pre">ParametricComponent</span></code> object has the following attributes:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">params</span></code>: This is composed of a <code class="docutils literal notranslate"><span class="pre">Composite</span></code> object and contains
the parameters for the current node.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">leaves</span></code>: This is a list of other <code class="docutils literal notranslate"><span class="pre">ParametricComponent</span></code> objects.</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">ParametricComponent</span></code> object has the following methods:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">compose_with</span></code>: This method adds a <code class="docutils literal notranslate"><span class="pre">ParametricComponent</span></code> object
as a leaf that can be called from the current node.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">new_params</span></code>: This method changes the local parameters structure at
the node level.</p></li>
</ul>
</section>
<section id="lifetimemodel-abstract-baseclass-implementation-control">
<h2><code class="docutils literal notranslate"><span class="pre">LifetimeModel</span></code> abstract baseclass : implementation control<a class="headerlink" href="#lifetimemodel-abstract-baseclass-implementation-control" title="Link to this heading">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">LifetimeModel</span></code> class provides an abstract base interface consisting of survival probability functions.
At this level, the methods <code class="docutils literal notranslate"><span class="pre">sf</span></code>, <code class="docutils literal notranslate"><span class="pre">hf</span></code>, <code class="docutils literal notranslate"><span class="pre">chf</span></code>, and <code class="docutils literal notranslate"><span class="pre">pdf</span></code> are marked as abstract methods, meaning
they must be implemented in any derived class. It is worth noting that these abstract methods have a default implementation
that is conditionally based on the existence of other methods. For example, if a derived class implements <code class="docutils literal notranslate"><span class="pre">hf</span></code> and <code class="docutils literal notranslate"><span class="pre">pdf</span></code>,
it can use the <code class="docutils literal notranslate"><span class="pre">super</span></code> mechanism to call the default implementation of <code class="docutils literal notranslate"><span class="pre">sf</span></code> instead of providing a concrete formula.</p>
<p>For those who are new to Python, it may seem cumbersome to rewrite a method that already has a default implementation and
simply call <code class="docutils literal notranslate"><span class="pre">super</span></code> within it. This is partially true. It is also important to recognize that a new contributor only needs
to read the derived class to understand the entire interface of its instances. In object-oriented programming (OOP), this explicitness
is particularly valuable. Additionally, in this case, <code class="docutils literal notranslate"><span class="pre">LifetimeModel</span></code> is a <strong>variadic</strong> generic abstract class,
where concrete methods can have variadic parameterization. Therefore, the docstring used to document the object interface
must be specified in each case.</p>
<p>A potential workaround for implementing a derived class of <code class="docutils literal notranslate"><span class="pre">LifetimeModel</span></code> could involve calling <code class="docutils literal notranslate"><span class="pre">super</span></code> for each abstract method.
This approach works at compile time since all abstract methods are implemented in the code; however, it will result
in a <code class="docutils literal notranslate"><span class="pre">RecursionError</span></code> at runtime if any of these methods are called.
One might consider using another Python feature, such as metaclasses, to exert more control over these classes.
However, we believe that using metaclasses would complicate the code significantly, while the <cite>abc</cite> module is a well-known
and established solution.</p>
<p>Finally, when examining a derived class of <code class="docutils literal notranslate"><span class="pre">LifetimeModel</span></code>, one may notice that some methods are tagged with the
<cite>override</cite> decorator. This decorator is used solely for static type checking tools (such as mypy) to ensure that the overridden
method does not alter the base signature and simply provides an alternative implementation.
Thus, it is applied whenever a non-abstract method is overridden, either for documentation purposes
or to offer a more suitable or straightforward implementation.</p>
<p><strong>improvements</strong> :</p>
<ul class="simple">
<li><p>with <code class="docutils literal notranslate"><span class="pre">__init_subclass__</span></code> read methods signature recursively in
order to to parse *args names and to fill args_names and nb_args</p></li>
</ul>
</section>
<section id="variadic-model-args-lifetimemodel-is-generic">
<h2>Variadic model <code class="docutils literal notranslate"><span class="pre">args</span></code> : <code class="docutils literal notranslate"><span class="pre">LifetimeModel</span></code> is <code class="docutils literal notranslate"><span class="pre">Generic</span></code><a class="headerlink" href="#variadic-model-args-lifetimemodel-is-generic" title="Link to this heading">#</a></h2>
<p>In previous versions of ReLife, the unpacking operator <code class="docutils literal notranslate"><span class="pre">*</span></code> was used to
create an infinite number of arguments that could be passed to a
function. This allowed the <code class="docutils literal notranslate"><span class="pre">LifetimeModel</span></code> interface to be responsive
to a variadic number of extra arguments in methods signatures when the
model was composed of other models. The following piece of code
illustrates this idea in the case of a regression model:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">LifetimeModel</span><span class="p">:</span>
    <span class="o">...</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">hf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">time</span><span class="p">:</span> <span class="n">NDArray</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">],</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">NDArray</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">]):</span><span class="o">...</span>

<span class="k">class</span><span class="w"> </span><span class="nc">ProportionalHazard</span><span class="p">(</span><span class="n">LifetimeModel</span><span class="p">):</span>
    <span class="n">baseline</span> <span class="p">:</span> <span class="n">LifetimeModel</span>
    <span class="o">...</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">hf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">time</span><span class="p">:</span> <span class="n">NDArray</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">],</span> <span class="n">covar</span> <span class="p">:</span> <span class="n">NDArray</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">],</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="n">NDArray</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">]):</span><span class="o">...</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">covar_effect</span><span class="o">.</span><span class="n">g</span><span class="p">(</span><span class="n">covar</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">baseline</span><span class="o">.</span><span class="n">hf</span><span class="p">(</span><span class="n">time</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span>
</pre></div>
</div>
<p>In this example, <code class="docutils literal notranslate"><span class="pre">ProportionalHazard</span></code> objects are composed of any
other <code class="docutils literal notranslate"><span class="pre">LifetimeModel</span></code> instance and inherit the <code class="docutils literal notranslate"><span class="pre">LifetimeModel</span></code>
interface in order to reuse the base implementation of probability
functions if needed. However, <code class="docutils literal notranslate"><span class="pre">ProportionalHazard</span></code> extends the <code class="docutils literal notranslate"><span class="pre">hf</span></code>
signature with one extra argument named <code class="docutils literal notranslate"><span class="pre">covar</span></code> to explicitly tell
users that in its case <code class="docutils literal notranslate"><span class="pre">*args</span></code> must have at least one <code class="docutils literal notranslate"><span class="pre">covar</span></code>
object. The <code class="docutils literal notranslate"><span class="pre">*args</span></code> parameter also allows
<code class="docutils literal notranslate"><span class="pre">model</span> <span class="pre">=</span> <span class="pre">ProportionalHazard(AFT(AFT(...(Weibull())</span></code> to run, because if
one wants to request <code class="docutils literal notranslate"><span class="pre">model.hf</span></code>, the number of arguments that must be
passed varies and is spread recursively in the chain of <code class="docutils literal notranslate"><span class="pre">baseline</span></code>
composition.</p>
<p>However, typing rules can be easily fooled or misrespected if one is not
careful. In the previous example, strictly speaking,
<code class="docutils literal notranslate"><span class="pre">ProportionalHazard</span></code> overrides the <code class="docutils literal notranslate"><span class="pre">hf</span></code> signature and violates the
Liskov Substitution Principle (LSP): <code class="docutils literal notranslate"><span class="pre">hf</span></code> expects
<code class="docutils literal notranslate"><span class="pre">[float,</span> <span class="pre">tuple[float,</span> <span class="pre">...]]</span></code> in <code class="docutils literal notranslate"><span class="pre">LifetimeModel</span></code>, but
<code class="docutils literal notranslate"><span class="pre">[float,</span> <span class="pre">float,</span> <span class="pre">tuple[float,</span> <span class="pre">...]]</span></code> in <code class="docutils literal notranslate"><span class="pre">ProportionalHazard</span></code>.</p>
<p>To handle correct type hinting and avoid issues related to the problem
explained above, ReLife uses <code class="docutils literal notranslate"><span class="pre">TypeVarTuple</span></code> introduced in Python 3.11.
This allows <code class="docutils literal notranslate"><span class="pre">LifetimeModel</span></code> to act as a
<a class="reference external" href="https://en.wikipedia.org/wiki/Template_(C%2B%2B)">template</a>,
enabling parametric polymorphism and variadic args.</p>
<p>Here is an example of how this can be implemented using
<code class="docutils literal notranslate"><span class="pre">TypeVarTuple</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">VariadicArgs</span> <span class="o">=</span> <span class="n">TypeVarTuple</span><span class="p">(</span><span class="s2">&quot;VariadicArgs&quot;</span><span class="p">)</span>

<span class="k">class</span><span class="w"> </span><span class="nc">LifetimeModel</span><span class="p">(</span><span class="n">Generic</span><span class="p">[</span><span class="o">*</span><span class="n">VariadicArgs</span><span class="p">]):</span>
    <span class="o">...</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">hf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">time</span><span class="p">:</span> <span class="n">NDArray</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">],</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="o">*</span><span class="n">VariadicArgs</span><span class="p">):</span><span class="o">...</span>

<span class="n">ModelArgs</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">[</span><span class="n">NDArray</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">],</span> <span class="o">...</span><span class="p">]</span>

<span class="k">class</span><span class="w"> </span><span class="nc">ProportionalHazard</span><span class="p">(</span><span class="n">LifetimeModel</span><span class="p">[</span><span class="n">NDArray</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">],</span> <span class="o">*</span><span class="n">ModelArgs</span><span class="p">]):</span>
    <span class="n">baseline</span> <span class="p">:</span> <span class="n">LifetimeModel</span><span class="p">[</span><span class="o">*</span><span class="n">ModelArgs</span><span class="p">]</span>
    <span class="o">...</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">hf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">time</span><span class="p">:</span> <span class="n">NDArray</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">],</span> <span class="n">covar</span> <span class="p">:</span> <span class="n">NDArray</span><span class="p">[</span><span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">],</span> <span class="o">*</span><span class="n">args</span><span class="p">:</span> <span class="o">*</span><span class="n">ModelArgs</span><span class="p">):</span><span class="o">...</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">covar_effect</span><span class="o">.</span><span class="n">g</span><span class="p">(</span><span class="n">covar</span><span class="p">)</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">baseline</span><span class="o">.</span><span class="n">hf</span><span class="p">(</span><span class="n">time</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span>
</pre></div>
</div>
<p>In this example, <code class="docutils literal notranslate"><span class="pre">VariadicArgs</span></code> is a type variable that can be any
<em>tuple</em> of types. Concrete implementation, like <code class="docutils literal notranslate"><span class="pre">ProportionalHazard</span></code>
can specify the expected <em>tuple</em> of types while still maintaining
correct type hinting. Here, <code class="docutils literal notranslate"><span class="pre">ProportionalHazard</span></code> expects this tuple of
types as extra arguments :
<code class="docutils literal notranslate"><span class="pre">tuple[NDArray[np.float64],</span> <span class="pre">*ModelArgs]</span> <span class="pre">=</span> <span class="pre">tuple[NDArray[np.float64],</span> <span class="pre">*tuple[NDArray[np.float64],</span> <span class="pre">...]]</span></code>
meaning a tuple consisting of at least one <code class="docutils literal notranslate"><span class="pre">NDArray[np.float64]</span></code> as
first element followed by zero or more <code class="docutils literal notranslate"><span class="pre">NDArray[np.float64]</span></code>. Note
that <code class="docutils literal notranslate"><span class="pre">tuple[NDArray[np.float64],</span> <span class="pre">*tuple[NDArray[np.float64],</span> <span class="pre">...]]</span></code>
cannot be rewritten as <code class="docutils literal notranslate"><span class="pre">tuple[NDArray[np.float64],</span> <span class="pre">...]</span></code> as it would
mean a tuple consisting of zero or more <code class="docutils literal notranslate"><span class="pre">NDArray[np.float64]</span></code>.</p>
</section>
<section id="lifetimedata-factory">
<h2><code class="docutils literal notranslate"><span class="pre">LifetimeData</span></code> factory<a class="headerlink" href="#lifetimedata-factory" title="Link to this heading">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">ParametricLifetimeModel</span></code> fitting process uses a <code class="docutils literal notranslate"><span class="pre">Likelihood</span></code>
object to estimate model parameters. In survival analysis, the
contribution of each observation to the likelihood depends on the type
of lifetime observation (complete, right censored, etc.) and any
truncations. Therefore, it is necessary to parse the data provided by
users and categorize each observation.</p>
<p>To accomplish this task, we use <code class="docutils literal notranslate"><span class="pre">LifetimeReader</span></code> objects, which are
responsible for parsing lifetime data. These objects are then used in a
factory object called <code class="docutils literal notranslate"><span class="pre">lifetime_data_factory</span></code> to construct a
<code class="docutils literal notranslate"><span class="pre">LifetimeData</span></code> object. This object encapsulates each group of lifetime
data in an <code class="docutils literal notranslate"><span class="pre">IndexedData</span></code> object, which keeps track of the index of the
original data.</p>
<p><code class="docutils literal notranslate"><span class="pre">IndexedData</span></code> can be thought of as a simplified version of
<code class="docutils literal notranslate"><span class="pre">pandas.Series</span></code> that only allows for the intersection or union of data
based. For example, you can use: - <code class="docutils literal notranslate"><span class="pre">intersection(*others)</span></code> to get
observations that are left truncated and complete. - <code class="docutils literal notranslate"><span class="pre">union(*others)</span></code>
to get observations that are complete or right censored.</p>
<p>Additionally, all values of lifetime data are stored as 2D arrays, which
makes probability computations more homogeneous in cases where there are
covariates.</p>
<p><strong>Why a factory ?</strong> The advantage of using a factory is that it
decouples the process of reading data and creating <code class="docutils literal notranslate"><span class="pre">LifetimeData</span></code>
objects. This makes it much easier to create variations of the reader
process if needed and isolate code in a cleaner way.</p>
</section>
<section id="other-considerations">
<h2>Other considerations<a class="headerlink" href="#other-considerations" title="Link to this heading">#</a></h2>
<p>There are a few constraints that must be followed when using the
<code class="docutils literal notranslate"><span class="pre">ParametricModel</span></code> object:</p>
<ul class="simple">
<li><p>At the model level, a user cannot request methods of a model if one
of the <code class="docutils literal notranslate"><span class="pre">params</span></code> values is <code class="docutils literal notranslate"><span class="pre">np.nan</span></code>. All parameter values must be
passed at the instantiation or the empty model must be fit before any
requests are made.</p></li>
<li><p>At the model level, <code class="docutils literal notranslate"><span class="pre">params</span></code> cannot be set individually or by name.
The user can only set all param values at once using a single setter.
If a user wants to control <code class="docutils literal notranslate"><span class="pre">params</span></code> names, they can use the
<code class="docutils literal notranslate"><span class="pre">params_names</span></code> getter or the string representation of the instance.</p></li>
</ul>
</section>
</section>


                </article>
              
              
              
              
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#parameters"><code class="docutils literal notranslate"><span class="pre">Parameters</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#parametriccomponent"><code class="docutils literal notranslate"><span class="pre">ParametricComponent</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#lifetimemodel-abstract-baseclass-implementation-control"><code class="docutils literal notranslate"><span class="pre">LifetimeModel</span></code> abstract baseclass : implementation control</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#variadic-model-args-lifetimemodel-is-generic">Variadic model <code class="docutils literal notranslate"><span class="pre">args</span></code> : <code class="docutils literal notranslate"><span class="pre">LifetimeModel</span></code> is <code class="docutils literal notranslate"><span class="pre">Generic</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#lifetimedata-factory"><code class="docutils literal notranslate"><span class="pre">LifetimeData</span></code> factory</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#other-considerations">Other considerations</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/contributor_guide/about_lifetime_models.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2025, RTE.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>