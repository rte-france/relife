
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Basics &#8212; ReLife</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=a8af75d9" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'basic/index';</script>
    <script src="../_static/custom-icon.js?v=74687d30"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="User guide" href="../user/index.html" />
    <link rel="prev" title="Installation" href="../installation.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class=" navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/small_relife.gif" class="logo__image only-light" alt="ReLife - Home"/>
    <img src="../_static/small_relife.gif" class="logo__image only-dark pst-js-only" alt="ReLife - Home"/>
  
  
</a></div>
    
      <div class="navbar-item"><!-- This will display the version of the docs -->
</div>
    
  </div>
  
  <div class=" navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../installation.html">
    Installation
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="#">
    Basics
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../user/index.html">
    User guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../api/index.html">
    API
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../developper/index.html">
    For developpers
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/rte-france/relife/tree/refactoring" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://pypi.org/project/relife/" title="PyPI" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-custom fa-pypi fa-lg" aria-hidden="true"></i>
            <span class="sr-only">PyPI</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar hide-on-wide">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../installation.html">
    Installation
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="#">
    Basics
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../user/index.html">
    User guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../api/index.html">
    API
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../developper/index.html">
    For developpers
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/rte-france/relife/tree/refactoring" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-square-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://pypi.org/project/relife/" title="PyPI" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-custom fa-pypi fa-lg" aria-hidden="true"></i>
            <span class="sr-only">PyPI</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Basics</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="basics">
<h1>Basics<a class="headerlink" href="#basics" title="Link to this heading">#</a></h1>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#a-starter-example" id="id3">A starter example</a></p>
<ul>
<li><p><a class="reference internal" href="#data-collection" id="id4">Data collection</a></p></li>
<li><p><a class="reference internal" href="#lifetime-model-estimation" id="id5">Lifetime model estimation</a></p></li>
<li><p><a class="reference internal" href="#maintenance-policy-optimization" id="id6">Maintenance policy optimization</a></p></li>
<li><p><a class="reference internal" href="#projection-of-consequences" id="id7">Projection of consequences</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#relife-and-numpy" id="id8">ReLife and Numpy</a></p></li>
<li><p><a class="reference internal" href="#variables-dimensions" id="id9">Variables dimensions</a></p></li>
</ul>
</nav>
<p>The section will help you understand basic commands and math concepts to begin with ReLife.</p>
<section id="a-starter-example">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">A starter example</a><a class="headerlink" href="#a-starter-example" title="Link to this heading">#</a></h2>
<figure class="align-center" id="id1">
<img alt="../_images/relife_workflow.png" src="../_images/relife_workflow.png" />
<figcaption>
<p><span class="caption-text">The ReLife’s workflow : from data collection to policy consequences</span><a class="headerlink" href="#id1" title="Link to this image">#</a></p>
</figcaption>
</figure>
<p>The figure above represents the four elementary steps of ReLife’s workflow (for left to right) :</p>
<ol class="arabic simple">
<li><p>You first need to collect failure data</p></li>
<li><p>Then, you generally fit a lifetime model. Note that all ReLife models are not necessarilly lifetime models. It can be stochastic processes too</p></li>
<li><p>From the obtained model, you create a policy. It is generally an age replacement policy (but it may vary too). With this kind of policy you can find a optimal age of replacement that minimize the annual costs for this maintenance strategy</p></li>
<li><p>Finally, you can project consequences (e.g. compute the expected number of annual replacements)</p></li>
</ol>
<p>The next parts provide ReLife command examples for each of these steps</p>
<section id="data-collection">
<h3><a class="toc-backref" href="#id4" role="doc-backlink">Data collection</a><a class="headerlink" href="#data-collection" title="Link to this heading">#</a></h3>
<p>In real life, you may have collected your own data but ReLife also provides built-in datasets so that you can start learning ReLife. For this example,
we will use the <em>power transformer dataset</em>. If you don’t know what a power transformer is, you can look at <a class="reference external" href="https://en.wikipedia.org/wiki/Transformer">the decicated Wikipedia page</a>
To load this dataset, you must import the function <code class="docutils literal notranslate"><span class="pre">load_power_transformer</span></code></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">relife.data</span><span class="w"> </span><span class="kn">import</span> <span class="n">load_power_transformer</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">load_power_transformer</span><span class="p">()</span>
</pre></div>
</div>
<p>Here <code class="docutils literal notranslate"><span class="pre">data</span></code> is a <a class="reference external" href="https://numpy.org/doc/stable/user/basics.rec.html">structured array</a> object that contains three fields :</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">time</span></code> : the observed lifetime values</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">event</span></code> : the event indicators tagging each observations as complete (<code class="docutils literal notranslate"><span class="pre">True</span></code>) or censored (<code class="docutils literal notranslate"><span class="pre">False</span></code>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">entry</span></code> : the left truncation values</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;time&quot;</span><span class="p">])</span>
<span class="go">[34.3 45.1 53.2 ... 30.  30.  30. ]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;event&quot;</span><span class="p">])</span>
<span class="go">[ True  True  True ... False False False]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;entry&quot;</span><span class="p">])</span>
<span class="go">[34. 44. 52. ...  0.  0.  0.]</span>
</pre></div>
</div>
</section>
<section id="lifetime-model-estimation">
<h3><a class="toc-backref" href="#id5" role="doc-backlink">Lifetime model estimation</a><a class="headerlink" href="#lifetime-model-estimation" title="Link to this heading">#</a></h3>
<p>From the obtained data you can fit a lifetime model. It may be a good idea to start with a non-parametric model like a Kaplan-Meier estimator.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">relife.lifetime_model</span><span class="w"> </span><span class="kn">import</span> <span class="n">KaplanMeier</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kaplan_meier</span> <span class="o">=</span> <span class="n">KaplanMeier</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kaplan_meier</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span>
<span class="go">      data[&quot;time&quot;],</span>
<span class="go">      event=data[&quot;event&quot;],</span>
<span class="go">      entry=data[&quot;entry&quot;],</span>
<span class="go">    )</span>
<span class="go">&lt;relife.lifetime_model.non_parametric.KaplanMeier at 0x732a2f85db90&gt;</span>
</pre></div>
</div>
<p>You can quickly plot the estimated survival function</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">kaplan_meier</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">sf</span><span class="p">()</span>
</pre></div>
</div>
<img alt="../_images/kaplan_meier.png" src="../_images/kaplan_meier.png" />
<p>You can also fit a simple parametric lifetime model : a Weibull lifetime distribution, and plot the two survival functions obtained in one graph</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">relife.lifetime_model</span><span class="w"> </span><span class="kn">import</span> <span class="n">Weibull</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">weibull</span> <span class="o">=</span> <span class="n">Weibull</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">weibull</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span>
<span class="go">      data[&quot;time&quot;],</span>
<span class="go">      event=data[&quot;event&quot;],</span>
<span class="go">      entry=data[&quot;entry&quot;],</span>
<span class="go">    )</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">weibull</span><span class="o">.</span><span class="n">params_names</span><span class="p">,</span> <span class="n">weibull</span><span class="o">.</span><span class="n">params</span><span class="p">)</span>
<span class="go">(&#39;shape&#39;, &#39;rate&#39;) [3.46597396 0.0122785 ]</span>
</pre></div>
</div>
<p>Note that this object holds <code class="docutils literal notranslate"><span class="pre">params</span></code> values and that the <code class="docutils literal notranslate"><span class="pre">fit</span></code> has modified them inplace. You can quickly visualize probability functions plot, like the survival function.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">weibull</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">sf</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">kaplan_meier</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">sf</span><span class="p">()</span>
</pre></div>
</div>
<img alt="../_images/kaplan_meier_and_weibull.png" src="../_images/kaplan_meier_and_weibull.png" />
</section>
<section id="maintenance-policy-optimization">
<h3><a class="toc-backref" href="#id6" role="doc-backlink">Maintenance policy optimization</a><a class="headerlink" href="#maintenance-policy-optimization" title="Link to this heading">#</a></h3>
<p>Now let’s consider that we want the study an age replacement policy. You need to know :</p>
<ul class="simple">
<li><p>the cost of a preventive replacement <span class="math notranslate nohighlight">\(c_p\)</span></p></li>
<li><p>the cost of an unexpected failure <span class="math notranslate nohighlight">\(c_f\)</span></p></li>
<li><p>the current ages of your assets</p></li>
</ul>
<p>For this example, we will fix <span class="math notranslate nohighlight">\(c_p\)</span> at 3 millions of euros and <span class="math notranslate nohighlight">\(c_f\)</span> at 11 millions of euros. For the sake of the illustration, we
will sample 1000 age values for a binomial distribution to represent the current ages of the assets. So here, we consider <strong>a fleet of 1000 assets</strong>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cp</span> <span class="o">=</span> <span class="mf">3.</span> <span class="c1"># cost of preventive replacement</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cf</span> <span class="o">=</span> <span class="mf">11.</span> <span class="c1"># cost of failure</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a0</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">binomial</span><span class="p">(</span><span class="mi">60</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span> <span class="c1"># asset ages</span>
</pre></div>
</div>
<p>Now you can use these values with the previous lifetime model to optimize an age replacement policy</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">relife.policy</span><span class="w"> </span><span class="kn">import</span> <span class="n">AgeReplacementPolicy</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">policy</span> <span class="o">=</span> <span class="n">AgeReplacementPolicy</span><span class="p">(</span>
<span class="go">      weibull,</span>
<span class="go">      cf=cf,</span>
<span class="go">      cp=cp,</span>
<span class="go">      a0=a0,</span>
<span class="go">      discounting_rate=0.04,</span>
<span class="go">    ).optimize()</span>
</pre></div>
</div>
<p>The obtained object encapsulates optimal ages of replacement in one array of 1000 values (because we considered 1000 assets). These data are stored in <code class="docutils literal notranslate"><span class="pre">ar</span></code>. One can also get the time before the first replacement
by requesting <cite>first_cycle_tr</cite>. Note here, that the optimal ages of replacement are the same for each asset because the costs are the same for each of them (but you can also pass arrays of cost values if you want).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Optimal ages of replacement (per asset)&quot;</span><span class="p">,</span> <span class="n">policy</span><span class="o">.</span><span class="n">ar</span><span class="p">[:</span><span class="mi">5</span><span class="p">])</span>
<span class="go">Optimal ages of replacement (per asset) [59.19751205 59.19751205 59.19751205 59.19751205 59.19751205]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Current asset ages&quot;</span><span class="p">,</span> <span class="n">policy</span><span class="o">.</span><span class="n">a0</span><span class="p">[:</span><span class="mi">5</span><span class="p">])</span>
<span class="go">Current asset ages [31 30 25 27 32]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Time before the first replacement (per asset)&quot;</span><span class="p">,</span> <span class="n">policy</span><span class="o">.</span><span class="n">first_cycle_tr</span><span class="p">[:</span><span class="mi">5</span><span class="p">])</span>
<span class="go">Time before the first replacement (per asset) [28.19751205 29.19751205 34.19751205 32.19751205 27.19751205]</span>
</pre></div>
</div>
</section>
<section id="projection-of-consequences">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">Projection of consequences</a><a class="headerlink" href="#projection-of-consequences" title="Link to this heading">#</a></h3>
<p>Now that we have optimized ages of replacement, we can project the consequences of this strategy.
For instance, you can be interested in seeing the expected number of replacements and number of failures for the next 170 years.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">nb_years</span> <span class="o">=</span> <span class="mi">170</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">timeline</span><span class="p">,</span> <span class="n">nb_replacements</span><span class="p">,</span> <span class="n">nb_failures</span> <span class="o">=</span> <span class="n">policy</span><span class="o">.</span><span class="n">annual_number_of_replacements</span><span class="p">(</span><span class="n">nb_years</span><span class="p">,</span> <span class="n">upon_failure</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>To do that, ReLife solves the renewal equation. The returned objects are arrays of with 170 values, one value for each upcoming years.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">timeline</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="go">(170,)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">nb_replacements</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="go">(170,)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">nb_failures</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="go">(170,)</span>
</pre></div>
</div>
<p>Here, ReLife does not offer built-in plot functionnalities. But of course, you can use <a class="reference external" href="https://matplotlib.org/">Matplotlib</a> code to represent these values in one graph.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">18</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span>  <span class="n">dpi</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">timeline</span> <span class="o">+</span> <span class="mi">2025</span><span class="p">,</span> <span class="n">nb_replacements</span><span class="p">,</span> <span class="n">align</span><span class="o">=</span><span class="s2">&quot;edge&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mf">1.</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;total replacements&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;C1&quot;</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">timeline</span> <span class="o">+</span> <span class="mi">2025</span><span class="p">,</span> <span class="n">nb_failures</span><span class="p">,</span> <span class="n">align</span><span class="o">=</span><span class="s2">&quot;edge&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mf">1.</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;failure replacements&quot;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s2">&quot;C0&quot;</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Number of annual replacements&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="s2">&quot;x-large&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s2">&quot;Year&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="s2">&quot;x-large&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="n">bottom</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="n">left</span><span class="o">=</span><span class="mi">2025</span><span class="p">,</span> <span class="n">right</span><span class="o">=</span><span class="mi">2025</span> <span class="o">+</span> <span class="n">nb_years</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">(</span><span class="n">loc</span><span class="o">=</span><span class="s2">&quot;upper right&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="s2">&quot;x-large&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<img alt="../_images/number_of_replacements.png" src="../_images/number_of_replacements.png" />
</section>
</section>
<section id="relife-and-numpy">
<h2><a class="toc-backref" href="#id8" role="doc-backlink">ReLife and Numpy</a><a class="headerlink" href="#relife-and-numpy" title="Link to this heading">#</a></h2>
<p>ReLife is built using <a class="reference external" href="https://numpy.org/">NumPy</a>, a fundamental Python library for numerical computing.
While you don’t need to be a NumPy expert, understanding its basics will help since ReLife often requires data input of type <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code></p>
<p>There are 3 standard representations of data in ReLife :</p>
<ul class="simple">
<li><p>If you want to pass a scalar value, then use a <code class="docutils literal notranslate"><span class="pre">float</span></code></p></li>
<li><p>If you want to pass a vector of <span class="math notranslate nohighlight">\(\mathbb{R}^n\)</span>, i.e. <span class="math notranslate nohighlight">\(n\)</span> values for one asset, then use a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> of shape <code class="docutils literal notranslate"><span class="pre">(n,)</span></code></p></li>
<li><p>If you want to pass a matrix of <span class="math notranslate nohighlight">\(\mathbb{R}^{m\times n}\)</span>, i.e. <span class="math notranslate nohighlight">\(n\)</span> values for <span class="math notranslate nohighlight">\(m\)</span> assets, then use a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> of shape <code class="docutils literal notranslate"><span class="pre">(n,)</span></code></p></li>
</ul>
<p><strong>Broadcasting examples</strong></p>
<p>Here we create a very simple lifetime model (a lifetime distribution) called Weibull. To demonstrate input/output logic, we will begin with a <code class="docutils literal notranslate"><span class="pre">float</span></code> input. Here
we want to compute <span class="math notranslate nohighlight">\(P(T &gt; 40)\)</span>, the survival function evaluated in 40.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">relife.lifetime_model</span><span class="w"> </span><span class="kn">import</span> <span class="n">Weibull</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">weibull</span> <span class="o">=</span> <span class="n">Weibull</span><span class="p">(</span><span class="mf">3.47</span><span class="p">,</span> <span class="mf">0.012</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">weibull</span><span class="o">.</span><span class="n">sf</span><span class="p">(</span><span class="mf">40.</span><span class="p">)</span>
<span class="go">np.float64(0.9246627462729304)</span>
</pre></div>
</div>
<p>The output has the same number of dimension than the input. It is a float-like object called <code class="docutils literal notranslate"><span class="pre">np.float64</span></code> that is compatible
with the NumPy interface. For instance, this object can answer to <code class="docutils literal notranslate"><span class="pre">.ndim</span></code> and <code class="docutils literal notranslate"><span class="pre">.shape</span></code> requests. Here it would be <code class="docutils literal notranslate"><span class="pre">0</span></code> and <code class="docutils literal notranslate"><span class="pre">()</span></code>.</p>
<p>Now, imagine that you want to compute not only <span class="math notranslate nohighlight">\(P(T &gt; 40)\)</span>, but also <span class="math notranslate nohighlight">\(P(T &gt; 50)\)</span> and <span class="math notranslate nohighlight">\(P(T &gt; 60)\)</span>. Because ReLife is built on NumPy, it benefits from
a concept called <a class="reference external" href="https://numpy.org/doc/stable/user/basics.broadcasting.html">broadcasting</a>. It provides a way to vectorize operations so that the three evaluations of the survival function
are computed in parallel. To do that, you need to pass a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> that encapsulate all your input values.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">weibull</span><span class="o">.</span><span class="n">sf</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">40.</span><span class="p">,</span> <span class="mf">50.</span><span class="p">,</span> <span class="mf">60.</span><span class="p">]))</span> <span class="c1"># 1d array of shape (3,)</span>
<span class="go">array([0.92466275, 0.84375201, 0.72625935])</span>
</pre></div>
</div>
<p>Note that the input is a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> of 1 dimension with a shape of <code class="docutils literal notranslate"><span class="pre">(3,)</span></code>. The output is consistent to the input and has the same shape. This logic is extended <strong>until
two dimensions</strong>. With ReLife, asset managers may be interested to compute values on a fleet of assets. In this scenario, it is sometimes usefull to <strong>pass several values per
assets.</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">weibull</span><span class="o">.</span><span class="n">sf</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="mf">40.</span><span class="p">,</span> <span class="mf">50.</span><span class="p">,</span> <span class="mf">60.</span><span class="p">],</span> <span class="p">[</span><span class="mf">42.</span><span class="p">,</span> <span class="mf">55.</span><span class="p">,</span> <span class="mf">68.</span><span class="p">]]))</span> <span class="c1"># 2d array of shape (2, 3)</span>
<span class="go">array([[0.92466275, 0.84375201, 0.72625935],</span>
<span class="go">       [0.91139796, 0.78939177, 0.61029328]])</span>
</pre></div>
</div>
<p>Note that the input is a <code class="docutils literal notranslate"><span class="pre">np.ndarray</span></code> of 2 dimensions with a shape of <code class="docutils literal notranslate"><span class="pre">(2,</span> <span class="pre">3)</span></code>. Each row <strong>is like a vector of values for each assets</strong>. Here the number of assets is 2.
The output shape is consistent to the input.</p>
</section>
<section id="variables-dimensions">
<h2><a class="toc-backref" href="#id9" role="doc-backlink">Variables dimensions</a><a class="headerlink" href="#variables-dimensions" title="Link to this heading">#</a></h2>
<p>Some Numpy data passed to ReLife functions cannot have any number of dimension. They try to correspond to a coherent math representation.</p>
<p><strong>ReLife does not control the dimension and the shapes or your data</strong>. We believe that the user is responsible and must know what he’s doing.
That’s why <strong>you must be carefull to the way you encode your data in Numpy objects</strong>. In this section, we provide a currated list of all possible encodings per input data and their possible shapes.</p>
<div class="pst-scrollable-table-container"><table class="table" id="id2">
<caption><span class="caption-text">Numpy encodings</span><a class="headerlink" href="#id2" title="Link to this table">#</a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>name</p></th>
<th class="head"><p>shape</p></th>
<th class="head"><p>dim</p></th>
<th class="head"><p>details</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">time</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">()</span></code>, <code class="docutils literal notranslate"><span class="pre">(n,)</span></code> or <code class="docutils literal notranslate"><span class="pre">(m,</span> <span class="pre">n)</span></code></p></td>
<td><p>0, 1 or 2</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">n</span></code> is the number of values and <code class="docutils literal notranslate"><span class="pre">m</span></code> is the number of assets</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">a0</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">()</span></code> or <code class="docutils literal notranslate"><span class="pre">(n,)</span></code></p></td>
<td><p>0 or 1</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ar</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">()</span></code> or <code class="docutils literal notranslate"><span class="pre">(n,)</span></code></p></td>
<td><p>0 or 1</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">covar</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">()</span></code>, <code class="docutils literal notranslate"><span class="pre">(k,)</span></code> or <code class="docutils literal notranslate"><span class="pre">(m,</span> <span class="pre">k)</span></code></p></td>
<td><p>0, 1 or 2</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">k</span></code> is the number of regression coefficients</p></td>
</tr>
</tbody>
</table>
</div>
</section>
</section>


                </article>
              
              
              
              
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#a-starter-example">A starter example</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#data-collection">Data collection</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#lifetime-model-estimation">Lifetime model estimation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#maintenance-policy-optimization">Maintenance policy optimization</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#projection-of-consequences">Projection of consequences</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#relife-and-numpy">ReLife and Numpy</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#variables-dimensions">Variables dimensions</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/basic/index.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2025, RTE.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  <!-- # L10n: Setting the PST URL as an argument as this does not need to be localized -->
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.16.1.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>